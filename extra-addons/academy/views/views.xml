<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <!-- =========================
         2.1 COURSE - LIST
         - Muestra name, category, duration, max_students
         - decoration-info online
    ========================== -->
    <record id="view_course_list" model="ir.ui.view">
      <field name="name">academy.course.list</field>
      <field name="model">academy.course</field>
      <field name="arch" type="xml">
        <list decoration-info="category == 'online'">
          <field name="name"/>
          <field name="category"/>
          <field name="duration"/>
          <field name="max_students"/>
        </list>
      </field>
    </record>

    <!-- =========================
         2.1 COURSE - FORM
         - sheet + group
         - one2many enrollments abajo
    ========================== -->
    <record id="view_course_form" model="ir.ui.view">
      <field name="name">academy.course.form</field>
      <field name="model">academy.course</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <field name="name"/>
              <field name="category"/>
            </group>
            <group>
              <field name="duration"/>
              <field name="max_students"/>
              <field name="available_seats" readonly="1"/>
            </group>

            <group string="Enrollments">
              <field name="enrollments">
                <list>
                  <field name="student_name"/>
                  <field name="enrollment_date"/>
                  <field name="state"/>
                </list>
              </field>
            </group>

          </sheet>
        </form>
      </field>
    </record>

    <!-- =========================
         2.1 COURSE - SEARCH
         - filter online
         - group by category
    ========================== -->
    <record id="view_course_search" model="ir.ui.view">
      <field name="name">academy.course.search</field>
      <field name="model">academy.course</field>
      <field name="arch" type="xml">
        <search>
          <field name="name"/>

          <filter string="Online" name="filter_online"
                  domain="[('category','=','online')]"/>

          <group expand="0" string="Group By">
            <filter string="Category" name="group_by_category"
                    context="{'group_by': 'category'}"/>
          </group>
        </search>
      </field>
    </record>

    <!-- Action Courses -->
    <record id="action_course" model="ir.actions.act_window">
      <field name="name">Courses</field>
      <field name="res_model">academy.course</field>
      <field name="view_mode">list,form</field>
      <field name="search_view_id" ref="view_course_search"/>
    </record>

    <!-- =========================
         2.2 ENROLLMENT - CALENDAR
         - date_start: enrollment_date
         - color: course_id
         - mode month
    ========================== -->
    <record id="view_enrollment_calendar" model="ir.ui.view">
      <field name="name">academy.enrollment.calendar</field>
      <field name="model">academy.enrollment</field>
      <field name="arch" type="xml">
        <calendar date_start="enrollment_date" color="course_id" mode="month">
          <field name="student_name"/>
          <field name="course_id"/>
          <field name="state"/>
        </calendar>
      </field>
    </record>

    <record id="action_enrollment_calendar" model="ir.actions.act_window">
      <field name="name">Enrollments</field>
      <field name="res_model">academy.enrollment</field>
      <field name="view_mode">calendar</field>
    </record>

    <!-- MenÃºs -->
    <menuitem id="menu_academy_root" name="Academy"/>
    <menuitem id="menu_academy_courses" name="Courses"
              parent="menu_academy_root" action="action_course"/>
    <menuitem id="menu_academy_enrollments" name="Enrollments (Calendar)"
              parent="menu_academy_root" action="action_enrollment_calendar"/>

  </data>
</odoo>